---
announce:
  skip: 'true'

archives:
  - files:
      - README.md
      - LICENSE
      - completion/**/*
    format_overrides:
      - format: zip
        goos: windows

before:
  hooks:
    - go mod tidy

brews:
  - description: A CLI logger that outputs emojified log messages and also acts as a CLI for Glamour (gorgeous terminal markdown rendering library)
    folder: Formula
    homepage: 'https://megabyte.space'
    install: |-
      bin.install "stylog"
      bash_completion.install "completion/bash/stylog.bash" => "stylog"
      zsh_completion.install "completion/zsh/_stylog" => "_stylog"
      fish_completion.install "completion/fish/stylog.fish"
    license: MIT
    name: stylog
    tap:
      name: homebrew-tap
      owner: installdoc
    test: ''

build:
  binary: stylog
  env:
    - CGO_ENABLED=0
  goarch:
    - '386'
    - amd64
    - arm
    - arm64
  goarm:
    - '6'
  goos:
    - windows
    - darwin
    - linux
  ignore:
    - goarch: '386'
      goos: darwin
  ldflags:
    # yamllint disable-line rule:line-length
    - '-s -w -X "main.version={{.Version}}" -X "main.commit={{.Commit}}" -X "main.date={{.Date}}" -X "main.builtBy=Megabyte Labs"'
  main: main.go

changelog:
  skip: true

checksum:
  name_template: CHECKSUMS.txt

dist: build

dockers:
  - dockerfile: .config/Dockerfile
    ids:
      - { { .ProjectName } }
    image_templates:
      - 'megabytelabs/{{.ProjectName}}:{{.Tag}}'
      - 'megabytelabs/{{.ProjectName}}:v{{.Major}}'
      - 'megabytelabs/{{.ProjectName}}:v{{.Major}}.{{.Minor}}'
      - 'megabytelabs/{{.ProjectName}}:latest'
    skip_push: 'false'

gomod:
  proxy: false

nfpms:
  - description: A CLI logger that outputs emojified log messages and also acts as a CLI for Glamour (gorgeous terminal markdown rendering library)
    formats:
      - apk
      - deb
      - rpm
    homepage: 'https://megabyte.space'
    id: default
    license: MIT
    maintainer: Megabyte Labs <help@megabyte.space>
    recommends:
      - git
    suggests:
      - docker
      - jq
      - yq
    vendor: Megabyte LLC

project_name: ''

release:
  disable: true

# eslint-disable max-len
snapcrafts:
  - confinement: classic
    # yamllint disable-line rule:line-length
    description: 'This project was built to provide styled terminal log messages from within shell scripts (mainly housed in a [Task](https://github.com/go-task/task) project). It supports basic log message types that are prepended with an emoji and also provides the capability of logging markdown files styled by [Glamour](https://github.com/charmbracelet/glamour).'
    extra_files:
      - destination: completion
        mode: 0755
        source: completion
    id: default
    license: MIT
    publish: true
    summary: A CLI logger that outputs emojified log messages and also acts as a CLI for Glamour (gorgeous terminal markdown rendering library)
# eslint-enable max-len

snapshot:
  name_template: '{{.Tag}}'

universal_binaries:
  - replace: true
